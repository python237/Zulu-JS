!function(i,t){"use strict";if(void 0===i||!1 in i||!1 in i.factory||i.isZulu!==i.factory.type)throw new Error("Zulu Toolkit requires");if(!i.factory.requires("1.0.0"))throw new Error("zulu ajax extension requires V1.0.0");function o(i,t){this.oldBrowserState=0,this.permissionDeniedState=1,this.positionUnavailableState=2,this.timeoutState=3,this.unknownErrorState=4;const o=this;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){i(t.coords.latitude,t.coords.longitude)},function(i){let n;switch(i.code){case i.PERMISSION_DENIED:n=o.permissionDeniedState;break;case i.POSITION_UNAVAILABLE:n=o.positionUnavailableState;break;case i.TIMEOUT:n=o.timeoutState;break;default:n=o.unknownErrorState}"function"==typeof t&&t(n)}):"function"==typeof t&&t(o.oldBrowserState)}function n(i){this.title="",this.body="",this.lang="",this.icon="",this.image="",this.dir="auto",this.tag="",this.renotify=!1,this.requireInteraction=!1,this.onclick=null,this.onerror=null,this.onshow=null,this.onclose=null,this.permissionDeniedCallback=function(){},this.oldBrowserCallback=function(){},n.prototype.isGranted="granted"===Notification.permission,n.prototype.isOldBrowser=!("Notification"in window),n.prototype.init=function(){return!this.isOldBrowser&&(!!this.isGranted||"denied"!==Notification.permission&&(Notification.requestPermission(function(i){"permission"in Notification||(Notification.permission=i)}),this.init()))},n.prototype.setOptions=function(i){void 0!==i&&("string"==typeof i.valueOf()?this.title=i:(this.title=i.title||this.title,this.body=i.body||this.body,this.lang=i.lang||this.lang,this.icon=i.icon||this.icon,this.image=i.image||this.image,this.dir=i.dir||this.dir,this.tag=i.tag||this.tag,this.renotify=i.renotify||this.renotify,this.requireInteraction=i.requireInteraction||this.requireInteraction,this.onclick=i.onclick||this.onclick,this.onerror=i.onerror||this.onerror,this.onshow=i.onshow||this.onshow,this.onclose=i.onclose||this.onclose,this.permissionDeniedCallback=i.permissionDeniedCallback||this.permissionDeniedCallback,this.oldBrowserCallback=i.oldBrowserCallback||this.oldBrowserCallback))},n.prototype.show=function(i){this.setOptions(i),this.isOldBrowser?this.oldBrowserCallback():this.isGranted?new Notification(this.title,{body:this.body,lang:this.lang,icon:this.icon,image:this.image,dir:this.dir,tag:this.tag,renotify:this.renotify,requireInteraction:this.requireInteraction,onclick:this.onclick,onerror:this.onerror,onshow:this.onshow,onclose:this.onclose}):this.permissionDeniedCallback()},this.setOptions(i)}i.prototype.location=o,i.prototype.notify=function(i){if(void 0===i)throw new Error("System requires data arguments");return new n(i)},i.factory.extensions.location=o,i.factory.extensions.notify=n}(function(i){return void 0!==i&&i.isZulu?i:void 0}(ux||window.ux),function(i){if(void 0!==i&&"function"==typeof i)return i;throw new Error("Requires zulu")}(z||window.zulu));
