!function(t,e){"use strict";if(void 0===t||!1 in t||!1 in t.factory||t.isZulu!==t.factory.type)throw new Error("Zulu library is required");if(!t.factory.requires("1.0.1"))throw new Error("Ajax requires Zulu V1.0.1");var r={launchCallback:function(t,e){if("object"==typeof t)for(var r=0;r<t.length;r++)setTimeout(t[r],0,e);else setTimeout(t,0,e)},checkCallback:function(t){if("function"==typeof t)return t;if("object"==typeof t){for(var e=0;e<t.length;e++)this.checkCallback(t[e]);return t}throw new Error("ajax callback requires function or list functions")}};function i(e){this.xhr=void 0,this.url=e,this.type="json",this.credentials=!0,this.mimeType="text/json",this.timeout=3e5,this.responseCallback=function(){},this.oldNavigatorCallback=function(){},this.collisionCallback=function(){},this.serverErrorCallback=function(){},this.requestBeginCallback=function(){},this.requestEndCallback=function(){},this.downloadProgressCallback=function(){},this.timeoutExceptionCallback=function(){},this.requestErrorCallback=function(){},this.requestAbortCallback=function(){},this.requestHeaders={},this.allowAllOrigin=!1;var s=!1,l=!1,a=this;if(i.prototype.valueOf={},i.prototype.isZulu="Zulu Ajax Object",i.prototype.running=function(){return l},i.prototype.setCredentials=function(t){return this.credentials=t,this},i.prototype.setType=function(t,e){return void 0!==t&&(this.type=t),void 0!==e&&(this.mimeType=e),this},i.prototype.setTimeout=function(t){return this.timeout=t,this},i.prototype.setRequestHeaders=function(t){return this.requestHeaders=t,this},i.prototype.pushToRequestHeaders=function(t,e){return void 0!==this.requestHeaders?this.requestHeaders[t]=e:(this.requestHeaders={},this.requestHeaders[t]=e),this},i.prototype.setAllowAllOrigin=function(t){this.allowAllOrigin=t},i.prototype.send=function(e){if(void 0===e.method)throw new Error("method request requires");this.responseCallback=r.checkCallback(e.response||this.responseCallback),this.oldNavigatorCallback=r.checkCallback(e.oldNavigator||this.oldNavigatorCallback),this.collisionCallback=r.checkCallback(e.collision||this.collisionCallback),this.serverErrorCallback=r.checkCallback(e.serverError||this.serverErrorCallback),this.requestBeginCallback=r.checkCallback(e.requestBegin||this.requestBeginCallback),this.requestEndCallback=r.checkCallback(e.requestEnd||this.requestEndCallback),this.downloadProgressCallback=r.checkCallback(e.downloadProgress||this.downloadProgressCallback),this.timeoutExceptionCallback=r.checkCallback(e.timeoutException||this.timeoutExceptionCallback),this.requestErrorCallback=r.checkCallback(e.requestError||this.requestErrorCallback),this.requestAbortCallback=r.checkCallback(e.requestAbort||this.requestAbortCallback),this.credentials=e.credentials||this.credentials,this.type=e.type||this.type,this.mimeType=e.mimeType||this.mimeType,this.timeout=e.timeout||this.timeout,this.requestHeaders=e.headers||this.requestHeaders,this.allowAllOrigin=e.allowAllOrigin||this.allowAllOrigin;e.authenticate;if(s)r.launchCallback(this.oldNavigatorCallback);else if(l)r.launchCallback(this.collisionCallback,e);else{for(o in""+(e.data||""),this.xhr.open(e.method,this.url,!0),this.xhr.withCredentials=this.credentials,this.xhr.overrideMimeType(this.mimeType),this.xhr.timeout=this.timeout,this.xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),this.requestHeaders)this.xhr.setRequestHeader(o,this.requestHeaders[o]);if(this.allowAllOrigin&&this.xhr.setRequestHeader("Access-Control-Allow-Origin","*"),"POST"===e.method){var i=e.data||[],a=null;if(void 0!==i&&null!=typeof i)if(i.isZulu===t.factory.type)a=new FormData(i.node);else for(var o in a=new FormData,i)a.append(o,i[o]);this.xhr.send(a)}else this.xhr.send(null)}return this},i.prototype.post=function(t){return t.method="POST",this.send(t)},i.prototype.get=function(t){return t.method="GET",this.send(t)},i.prototype.abort=function(){return this.xhr.abort(),this},i.prototype.setResponseCallback=function(t){return this.responseCallback=r.checkCallback(t),this},i.prototype.setOldNavigatorCallback=function(t){return this.oldNavigatorCallback=r.checkCallback(t),this},i.prototype.setCollisionCallback=function(t){return this.collisionCallback=r.checkCallback(t),this},i.prototype.setServerErrorCallback=function(t){return this.serverErrorCallback=r.checkCallback(t),this},i.prototype.setRequestBeginCallback=function(t){return this.requestBeginCallback=r.checkCallback(t),this},i.prototype.setRequestEndCallback=function(t){return this.requestEndCallback=r.checkCallback(t),this},i.prototype.setDownloadProgressCallback=function(t){return this.downloadProgressCallback=r.checkCallback(t),this},i.prototype.setTimeoutExceptionCallback=function(t){return this.timeoutExceptionCallback=r.checkCallback(t),this},i.prototype.setRequestErrorCallback=function(t){return this.requestErrorCallback=r.checkCallback(t),this},i.prototype.setRequestAbortCallback=function(t){return this.requestAbortCallback=r.checkCallback(t),this},window.XMLHttpRequest)this.xhr=new XMLHttpRequest;else if(window.ActiveXObject)try{if(this.xhr=new ActiveXObject("Msxml2.XMLHTTP"),void 0===this.xhr||null===this.xhr)throw new Error}catch(t){try{this.xhr=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){s=!0}}void 0===this.xhr||null===this.xhr?s=!0:(this.xhr.onabort=function(){r.launchCallback(a.requestAbortCallback),l=!1},this.xhr.onerror=function(){r.launchCallback(a.requestErrorCallback),l=!1},this.xhr.ontimeout=function(){r.launchCallback(a.timeoutExceptionCallback),l=!1},this.xhr.onprogress=function(t){r.launchCallback(a.downloadProgressCallback,t)},this.xhr.onloadstart=function(){r.launchCallback(a.requestBeginCallback),l=!0},this.xhr.onreadystatechange=function(){if(4===a.xhr.readyState){if(200===a.xhr.status){var t="";t="xml"===a.type?a.xhr.responseXML:"json"===a.type?JSON.parse(a.xhr.responseText):a.xhr.responseText,r.launchCallback(a.responseCallback,t)}else 301!==a.xhr.status&&302!==a.xhr.status&&a.xhr.status>=400&&a.xhr.status<=600&&r.launchCallback(a.serverErrorCallback,a.xhr.status);r.launchCallback(a.requestEndCallback),l=!1}})}t.prototype.xhr=function(t){if(void 0===t||"string"!=typeof t.valueOf())throw new Error("url required");return new i(t)},t.factory.extensions.xhr=i}(function(t){return void 0!==t&&t.isZulu?t:void 0}(ux||window.ux),function(t){if(void 0!==t&&"function"==typeof t)return t;throw new Error("Requires zulu")}(z||window.zulu));